# memedashboard-backend

## Процесс парсинга и анализа мемов

### Архитектура системы

Система состоит из следующих компонентов:

1. **Backend (FastAPI)** - основной сервис, отвечающий за парсинг, анализ и API
2. **PostgreSQL** - хранение данных о мемах, постах и метаданных
3. **Elasticsearch** - полнотекстовый поиск и индексация контента
4. **Frontend** - пользовательский интерфейс для взаимодействия с системой
5. **Nginx** - прокси-сервер для маршрутизации запросов

### Flow процесса

1. **Сбор данных**:
   - Парсинг постов из выбранных пабликов ВКонтакте через VK API
   - Сбор постов из каналов Telegram через Telegram API
   - Сохранение первичных данных в PostgreSQL

2. **Обработка и дедупликация**:
   - Извлечение изображений из постов
   - Вычисление перцептивных хешей для каждого изображения
   - Сравнение хешей для выявления дубликатов
   - Фильтрация неподходящего контента

3. **Анализ контента**:
   - Отправка изображений в OpenAI API для анализа
   - Получение текстового описания и классификации контента
   - Извлечение ключевых слов и тематик

4. **Индексация**:
   - Токенизация полученных описаний
   - Индексация в Elasticsearch для быстрого поиска
   - Создание связей между похожими мемами

5. **Аналитика**:
   - Еженедельный анализ трендов и популярных тем
   - Формирование отчетов с примерами мемов
   - Отслеживание динамики популярности тем

## Инструкция по запуску

### Предварительные требования

- Docker и Docker Compose
- Доступ к API ВКонтакте (токен)
- Доступ к OpenAI API (API ключ)

### Настройка окружения

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/yourusername/memedashboard-backend.git
   cd memedashboard-backend
   ```

2. Создайте файл `.env` на основе `.env.example`:

   ```bash
   cp .env.example .env
   ```

3. Отредактируйте файл `.env`, добавив необходимые API ключи и настройки:

   ```.env
   VK_TOKEN=ваш_токен_вк
   TELEGRAM_BOT_TOKEN=ваш_токен_телеграм
   OPENAI_API_KEY=ваш_ключ_openai
   ```

### Запуск с Docker Compose

1. Запустите все сервисы:

   ```bash
   docker-compose up -d
   ```

2. Доступ к системе:
   - Frontend: http://localhost
   - API: http://localhost/api
   - Документация API: http://localhost/api/docs
